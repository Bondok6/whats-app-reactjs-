{"version":3,"sources":["components/Input/Input.js","utils/shared.js","axios.js","store/Auth.js","store/Actions.js","store/Rooms.js","components/SignIn/SignIn.js","components/SignUp/SignUp.js","containers/Auth/Auth.js","containers/Logout/Logout.js","components/Backdrop/Backdrop.js","components/Modal/Modal.js","components/withErrorHandler/withErrorHandler.js","components/Spiner/Spiner.js","containers/Chat/Chat.js","components/SidebarChat/SidebarChat.js","components/SidebarContact/SidebarContact.js","store/Contacts.js","containers/Sidebar/Sidebar.js","containers/Whatsapp/Whatsapp.js","App.js","serviceWorker.js","store/AuthReducer.js","store/ContactsReducer.js","store/RoomsReducer.js","index.js"],"names":["Input","props","Element","classesArr","inValid","hasValidity","touched","push","elementType","className","join","elementConfig","value","onChange","changed","options","map","option","key","displayValue","label","chatMessage","data","recieved","img","p","id","span","document","createElement","span2","setAttribute","textContent","after","endsWith","appendChild","updatedObject","oldObject","updatedPro","checkValidity","rules","isValid","required","trim","minLength","length","maxLength","isEmail","test","isNumeric","instance","axios","create","baseURL","process","authSuccess","token","userId","photo","type","authFail","error","logout","localStorage","removeItem","authTimeOut","expirationTime","dispatch","setTimeout","fetchSuccess","rooms","fetchRooms","a","Axios","get","headers","getItem","res","status","roomSuccess","room","roomFail","message","form","FormData","append","console","log","SignIn","state","controls","email","valid","validation","placeholder","password","submit","e","preventDefault","signIn","event","elementName","updated","this","target","setState","formElementsArray","config","element","on","onClick","Component","connect","post","msg","expirationDate","Date","getTime","expiresIn","setItem","user","actions","SignUp","username","signUp","alt","style","borderRadius","width","height","files","selectedFile","reader","FileReader","imgtag","getElementById","classList","remove","title","name","onload","src","result","readAsDataURL","formData","Auth","Logout","onLogout","to","backdrop","show","clicked","Modal","nextProps","nextState","children","modalClosed","transform","opacity","withErrorHandler","WrappedComponent","errorConfirmedHandler","interceptors","request","use","req","response","Spiner","Mp3Recorder","MicRecorder","bitRate","WithErrorHanler","auth","loadRoom","roomName","friends","socket","chosenEmoji","useRef","emoj","ida","isRecord","useState","isBlocked","setIsBlocked","audi","emoji","micStart","micStop","inImage","send","photoSender","setId","voiceSender","setIdVoice","useEffect","navigator","getUserMedia","audio","sendMessage","sms","querySelector","current","body","display","scrollTo","top","behavior","sender","r","toString","rs","docs","b1","parentNode","replaceChild","parseInt","foot","ref","visibility","onEmojiClick","emojiObject","skinTone","SKIN_TONE_MEDIUM_DARK","IconButton","InsertEmoticon","voice","end","start","then","catch","stop","getMp3","buffer","blob","blobURL","URL","createObjectURL","s","file","File","lastModified","now","Button","variant","component","AttachFile","onInput","content","Avatar","friend","fetchRoom","image","fetcher","checkedContacts","contacts","popCons","contact","pushCons","checked","setChecked","classes","classes2","loading","serached","clearContacts","searchRoom","begain","filter","startsWith","emit","setShow","cons","sub","concat","SearchOutlined","fetchContacts","setRes","io","backgroundColor","textAlign","color","marginRight","withRouter","isAuth","onTry","routes","path","exact","WhatsApp","Boolean","window","location","hostname","match","initState","Reducer","action","initialState","loadRoon","messages","composeEnhancers","compose","compine","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3cb90b34.chunk.js","sourcesContent":["import React from 'react'\r\nimport './Input.css'\r\n\r\nconst Input = (props) => {\r\n    let Element = null\r\n    const classesArr=[\"inputElement\"]\r\n    if(props.inValid &&props.hasValidity && props.touched){\r\n        classesArr.push(\"Invalid\")\r\n    }\r\n\r\n    switch (props.elementType) {\r\n        case ('input'):\r\n            Element =\r\n                <input\r\n                    className={classesArr.join(' ')}\r\n                    {...props.elementConfig}\r\n                    value={props.value}\r\n                    onChange={props.changed}\r\n                    />\r\n            break;\r\n        case ('textarea'):\r\n            Element =\r\n                <textarea\r\n                    className={classesArr.join(' ')}\r\n                    {...props.elementConfig}\r\n                    value={props.value}\r\n                    onChange={props.changed}\r\n                    />\r\n            break;\r\n        case ('select'):\r\n            Element =\r\n                <select\r\n                    className={classesArr.join(' ')}\r\n                    value={props.value}\r\n                    onChange={props.changed}\r\n                    >\r\n                        {\r\n                            props.elementConfig.options.map(option=>(\r\n                                <option key={option.value} value={option.value}>{option.displayValue} </option>\r\n                            ))\r\n                        }\r\n                </select>\r\n            break;\r\n        default: Element =\r\n            <input\r\n                className={classesArr.join(' ')}\r\n                {...props.elementConfig}\r\n                value={props.value} />\r\n    }\r\n    return (\r\n        <div className=\"Input\">\r\n            <label className=\"label\"> {props.label} </label>\r\n            {Element}\r\n        </div>\r\n    )\r\n}\r\nexport default Input","export function chatMessage(data, recieved, img, id = \"id\") {\r\n  var span = document.createElement(\"span\"),\r\n    span2 = document.createElement(\"span\");\r\n  span.setAttribute(\"class\", \"chat__name\");\r\n  span.textContent = \"time\";\r\n  span2.setAttribute(\"class\", \"chat__timestamp\");\r\n  span2.setAttribute(\"style\", \"overflow:hidden\");\r\n\r\n  span2.textContent = data;\r\n  span.after(data);\r\n  var p;\r\n  span.after(span2);\r\n\r\n  if (\r\n    data.endsWith(\"png\") ||\r\n    data.endsWith(\"jpg\") ||\r\n    data.endsWith(\"PNG\") ||\r\n    data.endsWith(\"JPG\") ||\r\n    img === \"img\"\r\n  ) {\r\n    p = document.createElement(\"img\");\r\n    p.setAttribute(\"src\", data);\r\n\r\n    if (img === \"img\") p.setAttribute(\"style\", \"background-color:yellow\");\r\n\r\n    recieved\r\n      ? p.setAttribute(\"class\", `chat__message chat__reciever ${id}`)\r\n      : p.setAttribute(\"class\", \"chat__message\");\r\n    /*  p = document.createElement(\"h1\"), */\r\n    p.appendChild(span);\r\n    return p;\r\n  } else if (data.endsWith(\"wav\") || data.endsWith(\"mp3\") || img === \"voice\") {\r\n    p = document.createElement(\"audio\");\r\n    p.setAttribute(\"src\", data);\r\n    p.setAttribute(\"controls\", \"controls\");\r\n    p.setAttribute(\"id\", \"audio\");\r\n\r\n    if (img === \"voice\") p.setAttribute(\"style\", \"background-color:yellow\");\r\n\r\n    recieved\r\n      ? p.setAttribute(\"class\", `chat__message chat__reciever ${id}`)\r\n      : p.setAttribute(\"class\", \"chat__message\");\r\n    /*  p = document.createElement(\"h1\"), */\r\n    p.appendChild(span);\r\n    return p;\r\n  } else {\r\n    p = document.createElement(\"p\");\r\n    p.setAttribute(\"key\", id);\r\n\r\n    recieved\r\n      ? p.setAttribute(\"class\", \"chat__message chat__reciever\")\r\n      : p.setAttribute(\"class\", \"chat__message\");\r\n    /*  p = document.createElement(\"h1\"), */\r\n    p.appendChild(span);\r\n    p.textContent = data;\r\n    return p;\r\n  }\r\n}\r\n\r\nexport const updatedObject = (oldObject, updatedPro) => {\r\n  return {\r\n    ...oldObject,\r\n    ...updatedPro,\r\n  };\r\n};\r\n\r\nexport const checkValidity = (value, rules) => {\r\n  let isValid = true;\r\n  if (!rules) {\r\n    return true;\r\n  }\r\n\r\n  if (rules.required) {\r\n    isValid = value.trim() !== \"\" && isValid;\r\n  }\r\n\r\n  if (rules.minLength) {\r\n    isValid = value.length >= rules.minLength && isValid;\r\n  }\r\n\r\n  if (rules.maxLength) {\r\n    isValid = value.length <= rules.maxLength && isValid;\r\n  }\r\n\r\n  if (rules.isEmail) {\r\n    const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n    isValid = pattern.test(value) && isValid;\r\n  }\r\n\r\n  if (rules.isNumeric) {\r\n    const pattern = /^\\d+$/;\r\n    isValid = pattern.test(value) && isValid;\r\n  }\r\n\r\n  return isValid;\r\n};\r\n","import axios from 'axios';\n\nconst instance = axios.create({\n    baseURL: process.env.REACT_APP_BASE_URL\n});\n\nexport default instance;","import * as actionTypes from './Actions';\r\nimport Axios from '../axios'\r\n\r\nexport const authStart = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    };\r\n};\r\n\r\nexport const authSuccess = (token,userId,photo) => {\r\n\r\n    return {\r\n        type: actionTypes.AUTH_SUCCESS,\r\n        token,\r\n        photo,\r\n        userId\r\n    };\r\n};\r\n\r\nexport const authFail = (error) => {\r\n    return {\r\n        type: actionTypes.AUTH_FAIL,\r\n        error\r\n    }\r\n};\r\n\r\nexport const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"userId\");\r\n    localStorage.removeItem(\"expirationDate\");\r\n    return {\r\n        type: actionTypes.LOGOUT\r\n    }\r\n}\r\n\r\nexport const authTimeOut = (expirationTime) => {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            dispatch(logout())\r\n        }, expirationTime * 1000)\r\n    };\r\n};\r\n\r\n\r\nexport const authSignUp = (photo,name, email, password) => {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(authStart());\r\n            const formData=new FormData();\r\n            formData.append(\"photo\",photo);\r\n            formData.append(\"username\",name);\r\n            formData.append(\"email\",email);\r\n            formData.append(\"password\",password);\r\n            const res = await Axios.post('/signup', formData)\r\n            if (res.status !== 200 && res.status !== 201) {\r\n                dispatch(authFail(res.data.msg))\r\n            } else {\r\n                const expirationDate = new Date(new Date().getTime() + res.data.expiresIn * 1000);\r\n                localStorage.setItem(\"token\", res.data.token);\r\n                localStorage.setItem(\"userId\", res.data.user.id);\r\n                localStorage.setItem(\"expirationDate\", expirationDate);\r\n                dispatch(authSuccess(res.data.token, res.data.user.id,res.data.user.photo));\r\n                dispatch(authTimeOut(res.data.expiresIn));\r\n            }\r\n\r\n        } catch (err) {\r\n            dispatch(authFail(err))\r\n        }\r\n    };\r\n};\r\n\r\n\r\n\r\nexport const authSignIn = (email, password) => {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(authStart());\r\n            const res = await Axios.post('/login', {email, password})\r\n            const data = await res.data;\r\n            if (res.status !== 200 && res.status !== 201) {\r\n                dispatch(authFail(data.msg))\r\n            } else {\r\n                const expirationDate = new Date(new Date().getTime() + data.expiresIn * 1000);\r\n                localStorage.setItem(\"token\", data.token);\r\n                localStorage.setItem(\"userId\", data.user.id);\r\n                localStorage.setItem(\"expirationDate\", expirationDate);\r\n                dispatch(authSuccess(data.token, data.user.id,data.user.photo));\r\n                dispatch(authTimeOut(data.expiresIn))\r\n            }\r\n        } catch (error) {\r\n            dispatch(authFail(error));\r\n        }\r\n    }\r\n}\r\n\r\nexport const authCheckState = () => {\r\n    return async dispatch => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            dispatch(logout());\r\n        } else {\r\n            const expirationDate = new Date(localStorage.getItem(\"expirationDate\"));\r\n            if (expirationDate < new Date()) {\r\n                dispatch(logout());\r\n            } else {\r\n                \r\n                const userId = localStorage.getItem(\"userId\");\r\n                const res=await Axios.get(\"/user\",{\r\n                    headers:{\r\n                        \"authorization\":`Bearer ${token}`\r\n                    }\r\n                })\r\n                const data= res.data;\r\n                dispatch(authSuccess(token, userId,data.photo));\r\n                dispatch(authTimeOut((expirationDate.getTime() - new Date().getTime()) / 1000));\r\n            }\r\n        }\r\n    }\r\n}","export const AUTH_START=\"AUTH_START\";\r\nexport const AUTH_SUCCESS=\"AUTH_SUCCESS\";\r\nexport const AUTH_FAIL=\"AUTH_FAIL\";\r\n\r\nexport const LOGOUT=\"LOGOUT\"\r\nexport const CLEAR=\"CLEAR\"\r\n\r\nexport const FETCH_START=\"FETCH_START\";\r\nexport const FETCH_CONTACTS=\"FETCH_CONTACTS\";\r\nexport const FETCH_FAIL=\"FETCH_FAIL\";\r\n\r\n\r\nexport const POP_CONTACT=\"POP_CONTACT\";\r\nexport const PUSH_CONTACT=\"PUSH_CONTACT\";\r\nexport const CLEAR_CONTACTS=\"CLEAR_CONTACTS\"\r\n\r\nexport const FETCH_ROOM_START=\"FETCH_ROOM_START\";\r\nexport const FETCH_ROOM_SUCCESS=\"FETCH_ROOM_SUCCESS\";\r\nexport const FETCH_ROOM_FAIL=\"FETCH_ROOM_FAIL\";\r\n\r\n\r\nexport const PUSH_ROOM=\"PUSH_ROOM\";\r\n\r\nexport const ROOM_SUCCESS=\"ROOM_SUCCESS\";\r\nexport const ROOM_START=\"ROOM_START\";\r\nexport const ROOM_FAIL=\"ROOM_FAIL\";\r\n\r\nexport const SEARCH_ROOM=\"SEARCH_ROOM\";\r\n","import * as ActionTypes from \"./Actions\";\r\nimport Axios from '../axios'\r\nexport const fetchSuccess = (rooms) => {\r\n  return {\r\n    type: ActionTypes.FETCH_ROOM_SUCCESS,\r\n    rooms,\r\n  };\r\n};\r\n\r\nexport const fetchStart = () => {\r\n  return {\r\n    type: ActionTypes.FETCH_ROOM_START,\r\n  };\r\n};\r\nexport const fetchFail = (error) => {\r\n  return {\r\n    type: ActionTypes.FETCH_ROOM_FAIL,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const fetchRooms = (token) => {\r\n  return async (dispatch) => {\r\n    dispatch(fetchStart());\r\n    const res = await Axios.get(\"/rooms\", {\r\n      headers: {\r\n        'authorization': `Bearer ${localStorage.getItem(\"token\")}`,\r\n      }\r\n    });\r\n\r\n    const rooms =  res.data;\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      dispatch(fetchFail(rooms));\r\n    } else {\r\n      dispatch(fetchSuccess(rooms));\r\n    }\r\n  };\r\n};\r\n/********************************* */\r\n\r\n/*export const pushRoom=(room,friends)=>{\r\n    return {\r\n        type:ActionTypes.PUSH_ROOM,\r\n        room,friends\r\n    }\r\n}*/\r\n\r\n/************************************************* */\r\n\r\nexport const roomSuccess = (room, id) => {\r\n  return {\r\n    type: ActionTypes.ROOM_SUCCESS,\r\n    room,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const roomStart = () => {\r\n  return {\r\n    type: ActionTypes.ROOM_START,\r\n  };\r\n};\r\nexport const roomFail = (error, id) => {\r\n  return {\r\n    type: ActionTypes.ROOM_FAIL,\r\n    error,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const fetchRoom = (token, id) => {\r\n  return async (dispatch) => {\r\n    dispatch(roomStart());\r\n    const res = await Axios.get(`/room?room=${id}&&limit=30`, {\r\n      headers: {\r\n        'authorization': `Bearer ${token}`,\r\n      },\r\n    });\r\n    const room =  res.data;\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      dispatch(roomFail(room, id));\r\n    } else {\r\n      dispatch(roomSuccess(room, id));\r\n    }\r\n  };\r\n};\r\nexport const message = (photo) => {\r\n    return async dispatch => {\r\n        try {\r\n            const form=new FormData()\r\n            form.append(\"photo\",photo)\r\n            const res = await Axios('http://localhost:9004/message', form)\r\n            const data = await res.data\r\n            console.log(data)\r\n        }catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const searchRoom=(begain,rooms)=>{\r\n  let n=null\r\n  n= rooms.filter(r=>{\r\n    return r.name.startsWith(begain)\r\n })\r\n  return{\r\n    type:ActionTypes.SEARCH_ROOM,\r\n    serached:n\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Input from \"../../components/Input/Input\";\r\nimport { updatedObject, checkValidity } from \"../../utils/shared\";\r\nimport * as actions from \"../../store/index\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass SignIn extends Component {\r\n  state = {\r\n    controls: {\r\n      email: {\r\n        value: \"\",\r\n        valid: false,\r\n        validation: {\r\n          required: true,\r\n          isEmail: true,\r\n        },\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Email\",\r\n        },\r\n        touched: false,\r\n      },\r\n\r\n      password: {\r\n        value: \"\",\r\n        valid: false,\r\n        validation: {\r\n          required: true,\r\n          maxLength: 6,\r\n        },\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"password\",\r\n          placeholder: \"Password\",\r\n        },\r\n        touched: false,\r\n      },\r\n    },\r\n  };\r\n\r\n  on(event, elementName) {\r\n    const updated = updatedObject(this.state.controls, {\r\n      [elementName]: updatedObject(this.state.controls[elementName], {\r\n        valid: checkValidity(\r\n          event.target.value,\r\n          this.state.controls[elementName].validation\r\n        ),\r\n        value: event.target.value,\r\n        touched: true,\r\n      }),\r\n    });\r\n    this.setState({ controls: updated });\r\n  }\r\n  submit = (e) => {\r\n    e.preventDefault();\r\n    this.props.signIn(\r\n      this.state.controls.email.value,\r\n      this.state.controls.password.value\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const formElementsArray = [];\r\n    for (let key in this.state.controls) {\r\n      formElementsArray.push({\r\n        id: key,\r\n        config: this.state.controls[key],\r\n      });\r\n    }\r\n\r\n    let form = formElementsArray.map((element) => (\r\n      <Input\r\n        key={element.id}\r\n        changed={(e) => this.on(e, element.id)}\r\n        inValid={!element.config.valid}\r\n        value={element.config.value}\r\n        elementType={element.config.elementType}\r\n        hasValidity\r\n        touched={element.config.touched}\r\n        elementConfig={element.config.elementConfig}\r\n      />\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <div className=\"text-center\">\r\n          <div className=\"container\">\r\n            <div className=\"row m-5 m-5 m-5\">\r\n              <div className=\"col-4\"></div>\r\n              <form className=\"form-signin\">\r\n                <h1 className=\"h3 mb-3 font-weight-normal\">Please sign ip</h1>\r\n                {form}\r\n\r\n                <button\r\n                  className=\"btn btn-lg btn-primary btn-block mt-3\"\r\n                  type=\"submit\"\r\n                  onClick={this.submit}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {};\r\n};\r\n\r\nconst mapDispathToProps = (dispatch) => {\r\n  return {\r\n    signIn: (email, password) => dispatch(actions.authSignIn(email, password)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispathToProps)(SignIn);\r\n","import React, { Component } from \"react\";\r\nimport Input from \"../Input/Input\";\r\nimport { updatedObject, checkValidity } from \"../../utils/shared\";\r\nimport * as actions from \"../../store/index\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./SignUp.css\";\r\n\r\nclass SignUp extends Component {\r\n  state = {\r\n    controls: {\r\n      username: {\r\n        value: \"\",\r\n        valid: false,\r\n        validation: {\r\n          required: true,\r\n          minLength: 6,\r\n          maxLength: 12,\r\n        },\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"username\",\r\n          placeholder: \"Username\",\r\n        },\r\n        touched: false,\r\n      },\r\n      email: {\r\n        value: \"\",\r\n        valid: false,\r\n        validation: {\r\n          required: true,\r\n          isEmail: true,\r\n        },\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Email\",\r\n        },\r\n        touched: false,\r\n      },\r\n      password: {\r\n        value: \"\",\r\n        valid: false,\r\n        validation: {\r\n          required: true,\r\n          maxLength: 6,\r\n        },\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"password\",\r\n          placeholder: \"Password\",\r\n        },\r\n        touched: false,\r\n      },\r\n    },\r\n    photo: null,\r\n  };\r\n\r\n  on(event, elementName) {\r\n    const updated = updatedObject(this.state.controls, {\r\n      [elementName]: updatedObject(this.state.controls[elementName], {\r\n        valid: checkValidity(\r\n          event.target.value,\r\n          this.state.controls[elementName].validation\r\n        ),\r\n        value: event.target.value,\r\n        touched: true,\r\n      }),\r\n    });\r\n    this.setState({ controls: updated });\r\n  }\r\n  submit = (e) => {\r\n    e.preventDefault();\r\n    this.props.signUp(\r\n      this.state.photo,\r\n      this.state.controls.username.value,\r\n      this.state.controls.email.value,\r\n      this.state.controls.password.value\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const formElementsArray = [];\r\n    for (let key in this.state.controls) {\r\n      formElementsArray.push({\r\n        id: key,\r\n        config: this.state.controls[key],\r\n      });\r\n    }\r\n\r\n    let form = formElementsArray.map((element) => (\r\n      <Input\r\n        key={element.id}\r\n        changed={(e) => this.on(e, element.id)}\r\n        inValid={!element.config.valid}\r\n        value={element.config.value}\r\n        elementType={element.config.elementType}\r\n        hasValidity\r\n        touched={element.config.touched}\r\n        elementConfig={element.config.elementConfig}\r\n      />\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <div className=\"text-center\">\r\n          <div className=\"container\">\r\n            <div className=\"row m-5 m-5 m-5\">\r\n              <div className=\"col-4\"></div>\r\n              <form className=\"form-signin\">\r\n                <h1 className=\"h3 mb-3 font-weight-normal\">Please sign up</h1>\r\n                <img\r\n                  id=\"img\"\r\n                  alt=\"ss\"\r\n                  style={{ borderRadius: \"50%\", width: \"62px\", height: \"55px\" }}\r\n                  className=\"hidden\"\r\n                />\r\n                <input\r\n                  id=\"phoo\"\r\n                  type=\"file\"\r\n                  onChange={(event) => {\r\n                    if (event.target.files[0]) {\r\n                      this.setState({ photo: event.target.files[0] });\r\n                      var selectedFile = event.target.files[0];\r\n                      var reader = new FileReader();\r\n                      var imgtag = document.getElementById(\"img\");\r\n                      imgtag.classList.remove(\"hidden\");\r\n                      imgtag.title = selectedFile.name;\r\n                      reader.onload = function (event) {\r\n                        imgtag.src = event.target.result;\r\n                      };\r\n                      reader.readAsDataURL(selectedFile);\r\n                    }\r\n                  }}\r\n                />\r\n                {form}\r\n\r\n                <button\r\n                  className=\"btn btn-lg btn-primary btn-block mt-3\"\r\n                  type=\"submit\"\r\n                  onClick={this.submit}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    signUp: (photo, name, email, password) =>\r\n      dispatch(actions.authSignUp(photo, name, email, password)),\r\n    message: (photo) => dispatch(actions.message(photo)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);\r\n","import React from \"react\";\r\nimport SignIn from \"../../components/SignIn/SignIn\";\r\nimport SignUp from \"../../components/SignUp/SignUp\";\r\n\r\nfunction Auth() {\r\n  return (\r\n    <>\r\n      <SignIn />\r\n      <SignUp />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n","import React ,{Component} from 'react';\r\nimport * as actions from '../../store/index'\r\nimport {connect} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nclass Logout extends Component {\r\n    componentDidMount(){\r\n        this.props.onLogout();\r\n    }\r\n   \r\n    render(){\r\n        return <Redirect to=\"/auth\" />\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n       onLogout:()=>dispatch(actions.logout())    \r\n    }\r\n}\r\nexport default connect(null,mapDispatchToProps)(Logout)\r\n ","import React from 'react';\n\nimport './Backdrop.css';\n\nconst backdrop = (props) => (\n    props.show ? <div className=\"Backdrop\" onClick={props.clicked}></div> : null\n);\n\nexport default backdrop;","import React, { Component } from 'react';\n\nimport './Modal.css';\nimport Backdrop from '../Backdrop/Backdrop';\n\nclass Modal extends Component {\n\n    shouldComponentUpdate ( nextProps, nextState ) {\n        return nextProps.show !== this.props.show || nextProps.children !== this.props.children;\n    }\n\n    render () {\n        return (\n            <>\n                <Backdrop show={this.props.show} clicked={this.props.modalClosed} />\n                <div\n                    className=\"Modal\"\n                    style={{\n                        transform: this.props.show ? 'translateY(0)' : 'translateY(-100vh)',\n                        opacity: this.props.show ? '1' : '0'\n                    }}>\n                    {this.props.children}\n                </div>\n            </>\n        )\n    }\n}\n\nexport default Modal;","import React, { Component } from \"react\";\n\nimport Modal from \"../Modal/Modal\";\n\nconst withErrorHandler = (WrappedComponent, axios) => {\n  return class extends Component {\n    state = {\n      error: null,\n    };\n\n    UNSAFE_componentWillMount() {\n      axios.interceptors.request.use((req) => {\n        this.setState({ error: null });\n        return req;\n      });\n      axios.interceptors.response.use(\n        (res) => res,\n        (error) => {\n          this.setState({ error: error });\n        }\n      );\n    }\n\n    errorConfirmedHandler = () => {\n      this.setState({ error: null });\n    };\n\n    render() {\n      return (\n        <>\n          <Modal\n            show={this.state.error}\n            modalClosed={this.errorConfirmedHandler}\n          >\n            {this.state.error ? this.state.error.message : null}\n          </Modal>\n          <WrappedComponent {...this.props} />\n        </>\n      );\n    }\n  };\n};\n\nexport default withErrorHandler;\n","import React from 'react'\r\nimport'./Spinner.css'\r\n\r\nconst Spiner=(props)=>(\r\n    <div className=\"Loader\"> Loadin... </div>\r\n)\r\n\r\nexport default Spiner","import { Avatar, Button, IconButton } from \"@material-ui/core\";\r\nimport {\r\n  AttachFile,\r\n  InsertEmoticon\r\n} from \"@material-ui/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport { chatMessage } from \"../../utils/shared\";\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport \"./Chat.css\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport StopIcon from \"@material-ui/icons/Stop\";\r\nimport * as actions from \"../../store/index\";\r\nimport Axios from \"../../axios\";\r\nimport WithErrorHanler from '../../components/withErrorHandler/withErrorHandler'\r\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from \"emoji-picker-react\";\r\nimport Spiner from \"../../components/Spiner/Spiner\";\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\nfunction Chat({ socket, userId, id, room, loadRoom, roomName, friends }) {\r\n  const chosenEmoji = useRef([]);\r\n  const emoj = useRef();\r\n  const ida = useRef();\r\n  const isRecord = useRef();\r\n  const [isBlocked, setIsBlocked] = useState(false);\r\n  const photo = useRef(null);\r\n  const audi = useRef(null);\r\n  const emoji = useRef();\r\n  const micStart = useRef();\r\n  const micStop = useRef();\r\n  const inImage = useRef();\r\n  const send = useRef();\r\n  const photoSender = useRef();\r\n  const setId = useRef();\r\n  const voiceSender = useRef();\r\n  const setIdVoice = useRef();\r\n\r\n\r\n\r\n \r\n\r\n  useEffect(() => {\r\n    navigator.getUserMedia(\r\n      { audio: true },\r\n      () => {\r\n        setIsBlocked(false);\r\n      },\r\n      () => {\r\n        setIsBlocked(true);\r\n      }\r\n    );\r\n  }, []);\r\n  \r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n   \r\n\r\n    var sms = document.querySelector(\"#sms\");\r\n    const formData = new FormData();\r\n\r\n    if (audi.current) {\r\n      formData.append(\"audio\", audi.current);\r\n      formData.append(\"setId\", setIdVoice.current);\r\n      let body = document.querySelector(\"#body\");\r\n      let p = chatMessage(\r\n        voiceSender.current,\r\n        true,\r\n        \"voice\",\r\n        setIdVoice.current\r\n      );\r\n      body.append(p);\r\n      send.current.style.display = \"none\";\r\n      inImage.current.style.display = \"inline-block\";\r\n      emoji.current.style.display = \"inline-block\";\r\n      ida.current.style.display = \"inline-block\";\r\n    } else if (photo.current) {\r\n      /* console.log(setId.current); */\r\n\r\n      formData.append(\"photo\", photo.current);\r\n      formData.append(\"setId\", setId.current);\r\n\r\n      let body = document.querySelector(\"#body\");\r\n      let p = chatMessage(photoSender.current, true, \"img\", setId.current);\r\n      body.append(p);\r\n\r\n      send.current.style.display = \"none\";\r\n      inImage.current.style.display = \"none\";\r\n      micStart.current.style.display = \"inline-block\";\r\n      emoji.current.style.display = \"inline-block\";\r\n      ida.current.style.display = \"inline-block\";\r\n    } else {\r\n      formData.append(\"message\", sms.value);\r\n      micStart.current.style.display = \"inline-block\";\r\n      inImage.current.style.display = \"inline-block\";\r\n    }\r\n    formData.append(\"sender\", userId);\r\n    formData.append(\"room\", id);\r\n    Axios.post(\"/message\", formData);\r\n    sms.value = \"\";\r\n    var imgtag = document.getElementById(\"img\");\r\n    imgtag.setAttribute(\"class\", \"hidden\");\r\n    audi.current = null;\r\n    photo.current = null;\r\n    body.scrollTo({top:100000,behavior:'smooth'})\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    if (socket) {\r\n      socket.on(\"sent\", (data, sender, r, id) => {\r\n        if (\r\n          data.endsWith(\"png\") ||\r\n          data.endsWith(\"jpg\") ||\r\n          data.endsWith(\"PNG\") ||\r\n          data.endsWith(\"JPG\")\r\n        ) {\r\n          if( inImage.current){\r\n          inImage.current.style.display = \"inline-block\";\r\n        }\r\n          if(id&&setId.current){\r\n          if (id.toString() === setId.current.toString()) {\r\n            let im = document.querySelector(`.${id.toString()}`);\r\n\r\n            \r\n            return im.setAttribute(\"style\", \"background-color:green\");\r\n          }\r\n        }\r\n        } else if (data.endsWith(\"mp3\") || data.endsWith(\"wav\")) {\r\n          if(micStart.current){\r\n          micStart.current.style.display = \"inline-block\";}\r\n          if(id&&setIdVoice.current){\r\n          if (id.toString() === setIdVoice.current.toString()) {\r\n            let im = document.querySelector(`.${id.toString()}`);\r\n            return im.setAttribute(\"style\", \"background-color:green\");\r\n          }\r\n        }\r\n        }\r\n      \r\n        \r\n        let recieved = false;\r\n        recieved = userId === sender ? true : false;\r\n        var body = document.querySelector(\"#body\");\r\n        let p = chatMessage(data, recieved, \"\", id);\r\n        body.append(p);\r\n       \r\n         \r\n      });\r\n    }\r\n  }, [socket, userId]);\r\n\r\n  let rs = null;\r\n\r\n  if (loadRoom) {\r\n    console.log(\"hehe\"); //lsaaaaaaaaaaaaaaa\r\n    rs = <Spiner />;\r\n  }\r\n\r\n  if (room.length !== 0) {\r\n    if (room.docs) {\r\n      var b1 = document.querySelector(\"#body\");\r\n      var body = document.createElement(\"div\");\r\n      body.setAttribute(\"class\", \"chat__body\");\r\n      body.setAttribute(\"id\", \"body\");\r\n      if (b1) {\r\n        b1.parentNode.replaceChild(body, b1);\r\n        rs = room.docs.map((r) => {\r\n          let recieved = false;\r\n          recieved = parseInt(userId) === r.sender ? true : false;\r\n\r\n            body.scrollTo({top:100000,behavior:'smooth'})\r\n           \r\n          \r\n          return body.append(chatMessage(r.message, recieved, r.id));\r\n        });\r\n      }\r\n    }\r\n  }\r\n  const start = () => {\r\n    var voice = document.querySelector(\".start\"),\r\n      end = document.querySelector(\".end\");\r\n    voice.setAttribute(\"id\", \"hidden\");\r\n    end.setAttribute(\"id\", \"\");\r\n    inImage.current.style.display = \"none\";\r\n    emoji.current.style.display = \"none\";\r\n    ida.current.style.display = \"none\";\r\n    micStart.current.style.display = \"none\";\r\n    if (isBlocked) {\r\n      console.log(\"Permission Denied\");\r\n    } else {\r\n      Mp3Recorder.start()\r\n        .then(() => {\r\n          /*  setIsRecording(true); */\r\n          isRecord.current = true;\r\n        })\r\n        .catch((e) => console.error(e));\r\n    }\r\n  };\r\n\r\n  const stop = () => {\r\n    var voice = document.querySelector(\".start\"),\r\n      end = document.querySelector(\".end\");\r\n    voice.setAttribute(\"id\", \"\");\r\n    end.setAttribute(\"id\", \"hidden\");\r\n    send.current.style.display = \"inline-block\";\r\n\r\n    Mp3Recorder.stop()\r\n      .getMp3()\r\n      .then(([buffer, blob]) => {\r\n        isRecord.current = false;\r\n\r\n        const blobURL = URL.createObjectURL(blob);\r\n        voiceSender.current = blobURL;\r\n\r\n        let s = new Date().getTime().toString();\r\n        setIdVoice.current = `b${s}c`;\r\n        const file = new File(buffer, \"me-at-thevoice.mp3\", {\r\n          type: blob.type,\r\n          lastModified: Date.now(),\r\n        });\r\n        audi.current = file;\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    chosenEmoji.current = [...chosenEmoji.current, emojiObject];\r\n    ida.current.value +=\r\n      chosenEmoji.current[chosenEmoji.current.length - 1].emoji;\r\n    if (ida.current.value) {\r\n      micStart.current.style.display = \"none\";\r\n      inImage.current.style.display = \"none\";\r\n    } else {\r\n      micStart.current.style.display = \"inline-block\";\r\n      inImage.current.style.display = \"inline-block\";\r\n    }\r\n  };\r\n\r\n  const openEmoji = () => {\r\n    const span = emoj.current;\r\n    span.style.visibility = span.style.visibility === \"hidden\" ? \"\" : \"hidden\";\r\n  };\r\n\r\n  const inText = (e) => {\r\n    if (e.target.value) {\r\n      micStart.current.style.display = \"none\";\r\n      inImage.current.style.display = \"none\";\r\n    } else {\r\n      micStart.current.style.display = \"inline-block\";\r\n      inImage.current.style.display = \"inline-block\";\r\n    }\r\n  };\r\n\r\n\r\n  let foot = null;\r\n  if (id) {\r\n    foot = (\r\n      <div className=\"chat__footer\">\r\n        <form>\r\n          <div ref={emoji}>\r\n            <div className=\"emoji\" ref={emoj} style={{ visibility: \"hidden\" }}>\r\n              <Picker\r\n                onEmojiClick={onEmojiClick}\r\n                skinTone={SKIN_TONE_MEDIUM_DARK}\r\n              />\r\n            </div>\r\n            {/*  <div ref={ida}></div> */}\r\n            <IconButton onClick={openEmoji}>\r\n              <InsertEmoticon />\r\n            </IconButton>\r\n          </div>\r\n          <input\r\n            placeholder=\"Type a message\"\r\n            type=\"text\"\r\n            id=\"sms\"\r\n            ref={ida}\r\n            onChange={inText}\r\n          />\r\n          <button onClick={sendMessage} type=\"submit\">\r\n            Send a message\r\n          </button>\r\n\r\n          <button onClick={sendMessage} type=\"submit\" ref={send}>\r\n            Send\r\n          </button>\r\n\r\n          <MicIcon className=\"start\" onClick={start} ref={micStart}></MicIcon>\r\n\r\n          <StopIcon\r\n            className=\"end\"\r\n            id=\"hidden\"\r\n            onClick={stop}\r\n            ref={micStop}\r\n          ></StopIcon>\r\n\r\n          {photo ? (\r\n            <>\r\n              <img\r\n                id=\"img\"\r\n                alt=\"ss\"\r\n                style={{ borderRadius: \"50%\", width: \"62px\", height: \"55px\" }}\r\n                className=\"hidden\"\r\n              />\r\n              <Button\r\n                ref={inImage}\r\n                variant=\"contained\"\r\n                component=\"label\"\r\n                style={{ borderRadius: \"50%\" }}\r\n              >\r\n                <AttachFile />\r\n                <input\r\n                  id=\"phoo\"\r\n                  type=\"file\"\r\n                  style={{ display: \"none\" }}\r\n                  onInput={(event) => {\r\n                    if (event.target.files[0]) {\r\n                      photo.current = event.target.files[0];\r\n                      var selectedFile = event.target.files[0];\r\n                      var reader = new FileReader();\r\n                      var imgtag = document.getElementById(\"img\");\r\n                      imgtag.classList.remove(\"hidden\");\r\n\r\n                      imgtag.title = selectedFile.name;\r\n                      reader.onload = function (event) {\r\n                        imgtag.src = event.target.result;\r\n                        photoSender.current = event.target.result;\r\n                        let s = new Date().getTime().toString();\r\n                        setId.current = `a${s}`;\r\n                      };\r\n                      reader.readAsDataURL(selectedFile);\r\n                      \r\n                    }\r\n                    // console.log(event.target.files[0],photo.current)\r\n                    if (event.target.files[0]) {\r\n                      micStart.current.style.display = \"none\";\r\n                      emoji.current.style.display = \"none\";\r\n                      ida.current.style.display = \"none\";\r\n                      send.current.style.display = \"inline-block\";\r\n                    }\r\n                  }}\r\n                />\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button\r\n              ref={inImage}\r\n              variant=\"contained\"\r\n              component=\"label\"\r\n              style={{ borderRadius: \"50%\" }}\r\n            >\r\n              <AttachFile />\r\n              <input\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                onInput={(event) => {\r\n                  photo.current = event.target.files[0];\r\n                  var selectedFile = event.target.files[0];\r\n                  var reader = new FileReader();\r\n                  var imgtag = document.getElementById(\"img\");\r\n                  imgtag.title = selectedFile.name;\r\n                  console.log(\"geg\")\r\n                  reader.onload = function (event) {\r\n                    imgtag.src = event.target.result;\r\n                    photoSender.current = event.target.result;\r\n                    setId.current = new Date().getTime();\r\n                  };\r\n                  reader.readAsDataURL(selectedFile);\r\n\r\n                  if (event.target.files[0]) {\r\n                    console.log(\"hereaaa\");\r\n                    micStart.current.style.display = \"none\";\r\n                    emoji.current.style.display = \"none\";\r\n                    ida.current.style.display = \"none\";\r\n                    send.current.style.display = \"inline-block\";\r\n                  }\r\n                }}\r\n              />\r\n            </Button>\r\n          )}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  let content = <Spiner />;\r\n  if (!loadRoom) {\r\n    content = (\r\n      <div className=\"chat__body\" id=\"body\">\r\n        {rs}\r\n      </div>\r\n    );\r\n  }\r\n \r\n\r\n\r\n\r\n  return (\r\n    \r\n    <div className=\"chat\">\r\n      <div className=\"chat__header\">\r\n        <Avatar />\r\n        <div className=\"chat__headerInfo\">\r\n          <h3> {roomName ? roomName : \"Welcome\"} </h3>\r\n          <p>\r\n            {\" \"}\r\n            {friends\r\n              ? \"Members : \" + friends.map((friend) => friend.username + \"  \")\r\n              : \"\"}\r\n          </p>\r\n        </div>\r\n        <div className=\"chat__headerRight\">\r\n         \r\n        </div>\r\n      </div>\r\n\r\n      {content}\r\n\r\n      {foot}\r\n        </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    username: state.auth.username,\r\n    userId: state.auth.userId,\r\n    id: state.rooms.id,\r\n    room: state.rooms.room,\r\n    token: state.auth.token,\r\n    loadRoom: state.rooms.loadRoom,\r\n    roomName: state.rooms.roomName,\r\n    friends: state.rooms.friends,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    message: (photo) => dispatch(actions.message(photo)),\r\n  };\r\n};\r\n\r\nexport default WithErrorHanler(connect(mapStateToProps, mapDispatchToProps)(Chat),Axios);\r\n","import { Avatar } from '@material-ui/core'\r\nimport React from 'react'\r\nimport * as actions from '../../store/index'\r\nimport {connect} from 'react-redux'\r\nimport './SidebarChat.css'\r\n\r\nfunction SidebarChat({image,recieved,token,fetchRoom,id}) {\r\n  const  fetcher=(token,id)=>{\r\n    fetchRoom(token,id);\r\n    }\r\n    return (\r\n        <div onClick={()=>{fetcher(token,id)}} className=\"sidebarChat\">\r\n            <Avatar src={image ? image :\"\"} />\r\n            <div className=\"sidebarChat__info\">\r\n                <h2>{recieved ? recieved :\"name\"}</h2>\r\n                <p>This is the last message</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps=state=>{\r\n    return{\r\n        token:state.auth.token\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        fetchRoom:(token,id)=>dispatch(actions.fetchRoom(token,id))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SidebarChat) ;\r\n","import { Avatar } from '@material-ui/core'\r\nimport React,{useState} from 'react'\r\nimport * as actions from '../../store/index';\r\nimport {connect} from 'react-redux'\r\nimport './SidebarContact.css'\r\n\r\nfunction SidebarChat({pushCons,popCons,name,photo,id}) {\r\n\r\n \r\n     const [checked,setChecked]=useState(false);\r\n     function add(){\r\n         setChecked(!checked)\r\n         if(!checked){\r\n            pushCons(id)\r\n         }else{\r\n            popCons(id)\r\n         }\r\n     };\r\n\r\n    var classes=[\"fa fa-check-circle none\"];\r\n    var classes2=[\"sidebarContact\" ]\r\n    if(checked){\r\n         classes=[\"fa fa-check-circle dis\"];\r\n         classes2=[\"sidebarContact active\" ]\r\n    }\r\n    return (\r\n        <div className={classes2} onClick={()=>add()}>\r\n            <Avatar src={photo} />\r\n            <div className=\"sidebarContact__info\">\r\n            <i className={classes}></i>\r\n                <h2>{name}</h2>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps=state=>{\r\n    return{\r\n        checkedContacts:state.contacts.checkedContacts\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        popCons:(contact)=>dispatch(actions.popContact(contact)),\r\n        pushCons:(contact)=>dispatch(actions.pushContact(contact))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SidebarChat)\r\n","import * as ActionTypes from './Actions'\r\nimport Axios from '../axios'\r\nexport  const start=()=>{\r\n    return{\r\n        type:ActionTypes.FETCH_START\r\n    }\r\n}\r\nexport const contacts=(contacts)=>{\r\n    return{\r\n    type:ActionTypes.FETCH_CONTACTS,\r\n    contacts\r\n    }\r\n}\r\nexport const contactsFail=(error)=>{\r\n    return{\r\n        type:ActionTypes.FETCH_FAIL,\r\n        error\r\n    }\r\n}\r\n\r\nexport const fetchContacts= (token)=>{\r\n    return async dispatch=>{\r\n        dispatch(start())\r\n      const res= await Axios.get('/users?paginate=false',{\r\n            headers:{\r\n                \"authorization\":`Bearer ${localStorage.getItem(\"token\")}`,\r\n            }\r\n        })\r\n\r\n       const cons=await res.data\r\n       if(res.status!==200&&res.status!==201){\r\n        dispatch(contactsFail(cons))\r\n       }else{\r\n        dispatch(contacts(cons))\r\n       }\r\n    }\r\n}\r\n\r\n\r\nexport const popContact=(contact)=>{\r\n    return{\r\n        type:ActionTypes.POP_CONTACT,\r\n        contact\r\n    }\r\n}\r\n\r\n\r\nexport const pushContact=(contact)=>{\r\n    return{\r\n        type:ActionTypes.PUSH_CONTACT,\r\n        contact\r\n    }\r\n}\r\n\r\n\r\nexport const clearContact=()=>{\r\n    return{\r\n        type:ActionTypes.CLEAR_CONTACTS\r\n    };\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport \"./Sidebar.css\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport SidebarChat from \"../../components/SidebarChat/SidebarChat\";\r\nimport SidebarContact from \"../../components/SidebarContact/SidebarContact\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/index\";\r\nimport Spiner from \"../../components/Spiner/Spiner\";\r\n\r\nfunction Sidebar({\r\n  contacts,\r\n  checkedContacts,\r\n  socket,\r\n  userId,\r\n  rooms,\r\n  fetchRooms,\r\n  token,\r\n  clearContacts,\r\n  photo,\r\n  loading,\r\n  searchRoom,\r\n  serached\r\n}) {\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"join-success\", (r) => {\r\n        //2\r\n        socket.emit(\"join-room\", r);\r\n        fetchRooms(token);\r\n      });\r\n    }\r\n  }, [socket, fetchRooms, token]);\r\n  \r\n\r\n  const [show, setShow] = useState(false);\r\n  function addRoom() {\r\n    var room = document.querySelector(\"#room__name\");\r\n\r\n    const friends = checkedContacts.concat(parseInt(userId));\r\n    socket.emit(\"new-room\", room.value, friends); //1\r\n    setShow(false);\r\n    clearContacts();\r\n  }\r\n\r\n  let cons = (\r\n    <div className=\"sidebar__chats\">\r\n      {serached.length>0 ? serached.map((room) => {\r\n        return <SidebarChat recieved={room.name} key={room.id} id={room.id} />;\r\n      }):rooms.map((room) => {\r\n        return <SidebarChat recieved={room.name} key={room.id} id={room.id} />;\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n     cons = <Spiner />;\r\n  }\r\n\r\n  if (show) {\r\n    cons = (\r\n      <div className=\"sidebar__contacts\">\r\n        {contacts.map((element) => {\r\n          return (\r\n            <SidebarContact\r\n              name={element.username}\r\n              id={element.id}\r\n              photo={element.photo}\r\n              key={element.id}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n  let sub = null;\r\n  if (show) {\r\n    sub = (\r\n      <>\r\n        <div id=\"name\"> Chat Name: </div> <input type=\"text\" id=\"room__name\" />\r\n        <button onClick={addRoom} id=\"submit__room\">\r\n          {\" \"}\r\n          Submit{\" \"}\r\n        </button>\r\n      </>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <Avatar src={photo} alt=\"s\" />\r\n        <div className=\"sidebar__headerRight\">\r\n         \r\n          <IconButton onClick={() => setShow(!show)}>\r\n            <ChatIcon />\r\n          </IconButton>\r\n        \r\n        </div>\r\n      </div>\r\n      <div className=\"sidebar__search\">\r\n        <div className=\"sidebar__searchContainer\">\r\n          <SearchOutlined />\r\n          <input placeholder=\"Search or start new chat\" type=\"text\" onChange={e=>{\r\n             searchRoom(e.target.value,rooms)\r\n          }} />\r\n        </div>\r\n      </div>\r\n\r\n      {cons}\r\n      {sub}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    checkedContacts: state.contacts.checkedContacts,\r\n    userId: state.auth.userId,\r\n    rooms: state.rooms.rooms,\r\n    token: state.auth.token,\r\n    photo: state.auth.photo,\r\n    loading: state.rooms.loading,\r\n    serached:state.rooms.serached\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchRooms: (token) => dispatch(actions.fetchRooms(token)),\r\n    clearContacts: () => dispatch(actions.clearContact()),\r\n    searchRoom:(begain,rooms)=>dispatch(actions.searchRoom(begain,rooms))\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Chat from \"../Chat/Chat\";\r\nimport Sidebar from \"../Sidebar/Sidebar\";\r\nimport io from \"socket.io-client\";\r\nimport * as actions from \"../../store/index\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nfunction Whatsapp({ userId, fetchContacts, contacts, fetchRooms, token }) {\r\n  const [socket, setRes] = useState();\r\n\r\n  useEffect(() => {\r\n    fetchContacts(token);\r\n  }, [fetchContacts, token]);\r\n\r\n  useEffect(() => {\r\n    fetchRooms(token);\r\n  }, [token, fetchRooms]);\r\n\r\n  useEffect(() => {\r\n    var s = io.connect(`${process.env.REACT_APP_BASE_URL}`);\r\n    setRes(s);\r\n    s.emit(\"join\", userId); //update the sicket id in db  && join to my rooms\r\n    s.on(\"sending\", (msg) => {});\r\n  }, [userId]);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ backgroundColor: \"#dadbd3\", textAlign: \"right\" }}>\r\n        <Link to=\"/logout\" style={{ color: \"black\", marginRight: \"5%\" }}>\r\n          {\" \"}\r\n          Logout{\" \"}\r\n        </Link>\r\n      </div>\r\n      <div className=\"app\">\r\n        <div className=\"app__body\">\r\n          <Sidebar contacts={contacts} socket={socket} />\r\n          <Chat socket={socket} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    contacts: state.contacts.contacts,\r\n    userId: state.auth.userId,\r\n    token: state.auth.token,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchContacts: (userId) => dispatch(actions.fetchContacts(userId)),\r\n    fetchRooms: (token) => dispatch(actions.fetchRooms(token)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Whatsapp);\r\n","import './App.css';\nimport Auth from './containers/Auth/Auth'\nimport Logout from './containers/Logout/Logout'\nimport { Route, Switch, withRouter, Redirect} from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport * as actions from './store/index'\nimport React, { useEffect } from 'react';\nimport WhatsApp from './containers/Whatsapp/Whatsapp' \nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"jquery/dist/jquery\";\nimport \"popper.js/dist/popper\";\nimport \"bootstrap/dist/js/bootstrap\";\n\nconst App =(props)=> {\n\n  \n  useEffect(()=>{\n    props.onTry()\n  })\n\n  \n    let routes = null;\n    routes = (\n      <Switch >\n          <Route component={Auth} path=\"/auth\" />\n          <Redirect to=\"/auth\" />\n        </Switch>\n    )\n    if (props.isAuth) {\n      routes = (\n          <Switch >\n            <Route exact component={WhatsApp} path=\"/\" />\n            <Route exact component={Logout} path=\"/logout\" />\n            <Redirect to=\"/\" />\n          </Switch>\n      )\n    }\n\n    return (\n      <>\n        <main >\n        {routes}\n        </main>\n        \n      </>\n    );\n  };\n\n\nconst mapStateToProps = state => {\n  return {\n    isAuth: state.auth.token !== null\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTry: () => dispatch(actions.authCheckState())\n  }\n}\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as actionTypes from './Actions';\r\n\r\nconst initState={\r\n    userId:null,\r\n    loading:false,\r\n    token:null,\r\n    username:null,\r\n    error:null,\r\n    signUp:false,\r\n    photo:null\r\n};\r\n\r\nconst Reducer =(state=initState,action)=>{\r\n    switch (action.type) {\r\n        case actionTypes.AUTH_START:\r\n            return{\r\n                ...state,\r\n                loading:true,\r\n                error:null,\r\n                signUp:action.signUp\r\n            };\r\n        case actionTypes.AUTH_SUCCESS:\r\n            return{\r\n                ...state,\r\n                token:action.token,\r\n                userId:action.userId,\r\n                username:action.username,\r\n                loading:false,\r\n                signUp:action.signUp,\r\n                photo:action.photo\r\n            };\r\n        case actionTypes.AUTH_FAIL:\r\n            return{\r\n                ...state,\r\n                loading:false,\r\n                error:action.error,\r\n                signUp:action.signUp\r\n            };\r\n        case actionTypes.LOGOUT:\r\n            return{\r\n                ...state,\r\n                token:null,\r\n                userId:null,\r\n                username:null,\r\n                photo:null,\r\n                error:null\r\n            }            \r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default Reducer","import * as ActionTypes from './Actions'\r\nconst initState = {\r\n    contacts: [],\r\n    loading: false,\r\n    checkedContacts: [],\r\n    error: null,\r\n\r\n};\r\n\r\nconst Reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_START:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            };\r\n        case ActionTypes.FETCH_FAIL:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.error\r\n            };\r\n        case ActionTypes.FETCH_CONTACTS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                contacts: action.contacts\r\n            };\r\n        case ActionTypes.POP_CONTACT:\r\n            return {\r\n                ...state,\r\n                checkedContacts: state.checkedContacts.filter(id => {\r\n                    return id !== action.contact\r\n                })\r\n            }\r\n        case ActionTypes.PUSH_CONTACT:\r\n            return {\r\n                ...state,\r\n                checkedContacts: state.checkedContacts.concat(action.contact)\r\n            };\r\n        case ActionTypes.CLEAR_CONTACTS:\r\n            return{\r\n                ...state,\r\n                checkedContacts:[]\r\n            }    \r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default Reducer","import * as ActionTypes from \"./Actions\";\r\n\r\nconst initialState = {\r\n  rooms: [],\r\n  loading: false,\r\n  loadRoon:false,\r\n  error: null,\r\n  room:[],\r\n  id:null,\r\n  roomName:null,\r\n  friends:null,\r\n  serached:[]\r\n};\r\nconst Reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionTypes.FETCH_ROOM_START:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case ActionTypes.FETCH_ROOM_SUCCESS:\r\n      return {\r\n        ...state,\r\n        rooms: action.rooms,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case ActionTypes.FETCH_ROOM_FAIL:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    case ActionTypes.PUSH_ROOM:\r\n      return {\r\n        ...state,\r\n        rooms: state.rooms.concat({\r\n          name: action.room,\r\n          friends: action.friends,\r\n        }),\r\n      };\r\n    case ActionTypes.ROOM_START:\r\n      return {\r\n          ...state,\r\n          loadRoon:true\r\n      };\r\n    case ActionTypes.ROOM_FAIL:\r\n      return {\r\n          ...state,\r\n          error:action.error,\r\n          loadRoon:false,\r\n          id:action.id\r\n      };\r\n    case ActionTypes.ROOM_SUCCESS:\r\n      return {\r\n          ...state,\r\n          room:action.room.messages,\r\n          loadRoon:false,\r\n          id:action.id,\r\n          roomName:action.room.room.name,\r\n          friends:action.room.room.friends\r\n         /*  photo:action.room.room.name */  //in advance **\r\n      };\r\n    case ActionTypes.SEARCH_ROOM:\r\n      return{\r\n        ...state,\r\n        serached:action.serached\r\n      }  \r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default Reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose,combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport auth from './store/AuthReducer'\nimport contacts from './store/ContactsReducer'\nimport rooms from './store/RoomsReducer'\n\n\nconst composeEnhancers = process.env.NODE_ENV ==='develpment'? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ :null || compose;\n\n\nconst compine=combineReducers({\n  auth,\n  contacts,\n  rooms\n})\n\nconst store = createStore(compine, composeEnhancers(applyMiddleware(thunk)))\n\nReactDOM.render(\n  \n    <Provider store={store} >\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  ,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}